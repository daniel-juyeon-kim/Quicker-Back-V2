## Quicker Back V2

[졸업 작품(Quicker)](https://github.com/daniel-juyeon-kim/Quicker_reactJS)의 문제점을 개선한 프로젝트입니다. 테스트 코드 작성, CI/CD 파이프라인 구축, 리팩토링, 재설계 등의 작업을 수행하여 테스트 커버리지 95.52%, 배포 자동화, LLM 코드 리뷰를 통한 코드 품질 향상 등의 성과를 거두었습니다.

### 테스트 코드 작성

#### [문제]

이전 프로젝트에서 기능을 직접 테스트하면서 개발했습니다. 후에 프로젝트를 리팩토링하면서 아래의 문제들을 겪고 테스트 코드를 도입하려 했지만, 데이터베이스 등 외부 환경 문제로 못했습니다.

- 리팩토링 후 같은 동작을 하는지 의심됨
- 개발자가 직접 하는 테스트는 일시적이고 오래 걸림
- 놓친 엣지 케이스가 배포 후 서버에서 확인됨

#### [해결]

모킹과 인 메모리 DB를 최소한으로 사용해 테스트 코드를 작성했고 테스트 커버리지 95.52%를 달성했습니다.

- 구현, 리팩토링 후 개발자가 의도한 동작을 보장함
- 지속적이고 빠른 테스트로 개발에 더 집중할 수 있음
- 엣지 케이스가 누락될 확률이 줄어듦

[자세히 보기](<docs/테스트 코드 작성.md>)

### CI/CD 파이프라인 구축

#### [문제]

이전 프로젝트에서 서버 개발과 관리를 담당했습니다. 기획 변경으로 다른 팀원의 기능을 서버에 이식하면서 배포가 2배로 늘고 개발하는 시간이 적어졌습니다. 그 외에도 불편한 점이 있었고 정리하면 다음과 같습니다.

- 서버에 PR 병합이 많아지면 개발시간이 줄고 배포는 늦어짐
- 팀원 중 코드 리뷰가 가능할 정도의 실력 차이가 없음
- 로컬 환경에서 통과한 테스트가 배포 환경에서는 실패할 수 있음(주로 코드 누락이 원인)

#### [해결]

CI/CD 툴 중에서 적은 학습으로 빠르게 사용할 수 있는 Github Action으로 파이프라인을 구축해 배포, 테스트, 코드 리뷰를 자동화했습니다. 아래와 같은 흐름으로 배포가 됩니다.

![CI/CD 파이프라인 이미지](https://raw.githubusercontent.com/daniel-juyeon-kim/Quicker-Back-V2/a8bc0e1c981ac7e8108e354f4a58ec4b102de5f5/docs/cicd-flow.drawio.svg)

- 배포 자동화로 서버 개발자가 배포에 소모하는 시간 단축(5분 -> 0분)
- LLM을 통한 코드 리뷰로 코드 품질 향상
- 배포 환경에서 문제 발생 감소(코드 누락 감소)

[자세히 보기](<docs/Github Action을 통한 CI CD 파이프라인 구축.md>)

### 리팩토링, 재설계

#### [문제]

이전 프로젝트에서 설계가 부실해 여러 책임이 파일 하나에 모여있어 관리, 파악, 테스트가 어려웠습니다.

#### [해결]

객체 지향 프로그래밍을 통해 재설계, 리팩토링하여 관리, 파악, 테스트가 용이하게 했습니다.

[자세히 보기](<docs/리팩토링과 소프트웨어 설계.md>)

### Sequelize에서 TypeORM으로 마이그레이션

#### [문제]

이전 프로젝트에서 DB 작업을 하면서 아래와 같은 문제가 있었습니다.

- 트랜잭션 미적용으로 DB 원자성에 문제가 있음
- 레포지토리 계층에서 에러 핸들링 부족
- DB 설계 결함과 불필요한 테이블 존재

Sequelize를 하면서 다음과 같은 문제가 있었습니다.

- 모델(DB 테이블 매핑)과 모델을 이용한 DB 작업에 작성하는 코드양이 많음
- 위 문제로 DB를 만들고 [Sequelize-Auto](https://www.npmjs.com/package/sequelize-auto)로 모델을 동기화했으나 ORM에 대한 이해와 학습이 되지 않았음

#### [해결]

TypeScript를 지원하는 ORM 중 다운로드, 러닝 커브, 데코레이터 지원으로 TypeORM을 선택했습니다. [학습 테스트](https://github.com/daniel-juyeon-kim/study-typeorm)를 통해 TypeORM의 사용법을 익혔습니다.

- 트랜잭션 적용으로 원자성 보장
- 레포지토리 계층 에러를 만들고 에러 컨트롤러가 처리할 수 있도록 수정
- DB 재설계

### Docker 도입

요금 문제로 클라우트 컴퓨팅 서비스를 변경할 때마다 서버 설정부터 배포까지 시간이 많이 소요되었습니다. 그래서 도커를 도입해 서버 초기 설정 시간을 30분에서 10분으로 단축했습니다.

### Swagger로 API 문서 작성

이전 프로젝트에서 클라이언트와 서버를 연동했는데 서버 API 문서를 작성하지 않아서 API 일부 기능을 까먹었고 설계에도 문제가 있었습니다. 그래서 API를 재설계하면서 Swagger로 API 문서를 작성했습니다.

### 기타

- ESLint, Prettier를 이용한 코드 포맷팅
- 요청 데이터에 대한 유효성 검사
- 본문에 HTTP 응답 코드, 메시지를 본문에 같이 보냄
