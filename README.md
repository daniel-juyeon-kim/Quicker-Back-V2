## Quicker V2

[Quicker V1](https://github.com/daniel-juyeon-kim/Quicker-V1)의 문제점을 개선한 프로젝트로 **테스트 코드 작성, CI/CD 파이프라인 구축, 리팩토링, 재설계** 등의 작업을 했고 **테스트 커버리지 95.52%, 배포 자동화, 코드 리뷰를 통한 코드 품질 향상** 등의 성과가 있었습니다.

### 테스트 코드 작성 [더보기](<docs/테스트 코드 작성.md>)

#### [문제]

새로운 기능을 개발할 때 직접 테스트하면서 개발했는데 기존 코드를 리팩토링하면서 다음과 같은 문제가 있었습니다.

- 리팩토링 후 동작이 달라짐
- 직접 테스트하는 방법은 일시적이고 오래 걸림
- 배포된 서버에서 놓친 엣지 케이스가 나옴

#### [해결]

**[모킹](<docs/테스트 코드 작성.md#외부-api-어댑터-테스트>)과 [인 메모리 DB를 최소한으로 사용해 테스트 코드를 작성](<docs/테스트 코드 작성.md#레포지토리-계층-테스트>)하여** 테스트 커버리지 95.52%를 달성했습니다.

- 구현한 기능을 안정적으로 리팩토링 가능
- 지속적이고 빠른 테스트로 개발에 더 집중할 수 있음
- 엣지 케이스가 누락될 확률이 줄어듦

### CI/CD 파이프라인 구축 [더보기](<docs/Github Action을 통한 CI CD 파이프라인 구축.md>)

#### [문제]

이전 프로젝트(Quicker V1)에서 PR을 병합하고 서버 프로젝트를 재배포하면서 다음과 같은 문제가 있었습니다.

- 서버 프로젝트에 PR 병합이 증가하면 **개발보다 배포에 시간을 씀**
- 코드 리뷰를 받고 싶지만 리뷰가 가능한 팀원이 없음
- 로컬 환경에서 테스트를 통과했지만, 배포 환경에서 문제가 발생함(주로 외부 환경, 코드 누락으로 문제 발생)

#### [해결]

CI/CD 툴 중에서 **적은 학습으로 빠르게 사용**할 수 있는 Github Action으로 파이프라인을 구축해 **[테스트](<docs/Github Action을 통한 CI CD 파이프라인 구축.md#테스트>), [코드 리뷰](<docs/Github Action을 통한 CI CD 파이프라인 구축.md#코드-리뷰>), [배포](<docs/Github Action을 통한 CI CD 파이프라인 구축.md#빌드-배포>)를 자동화**했습니다. 아래와 같은 흐름으로 배포가 됩니다.

![CI/CD 파이프라인 이미지](docs/cicd-flow.drawio.svg)

- **배포 자동화**로 서버 개발자가 배포하는 시간 단축(5분 → 0분)
- **OpenAI API를 통한 코드 리뷰**로 코드 품질 향상
- 배포 환경에서 문제 발생 감소

### 리팩토링, 재설계 [더보기](<docs/리팩토링과 소프트웨어 설계.md>)

#### [문제]

이전 프로젝트(Quicker V1)에서 설계가 부실해 **여러 책임이 파일 하나에 모여있어** 관리, 파악, 테스트가 어려웠습니다.

#### [해결]

**객체 지향 프로그래밍을 통해 [재설계, 리팩토링](<docs/리팩토링과 소프트웨어 설계.md#해결>)** 하여 관리, 파악, 테스트가 용이하게 했습니다.

### Sequelize에서 TypeORM으로 마이그레이션

#### [문제]

DB에 접근하기 위해 ORM으로 Sequelize를 사용하면서 다음과 같은 문제가 있었습니다.

- 모델 정의(DB 테이블 매핑)와 쿼리를 하기위해 **작성하는 코드양이 많음**
- 위 문제로 DB에서 테이블을 만들고 [Sequelize-Auto](https://www.npmjs.com/package/sequelize-auto)로 모델을 자동 생성했으나 ORM에 대한 이해와 학습이 되지 않았음

#### [해결]

TypeScript를 지원하는 ORM 중 **다운로드, 러닝 커브, 데코레이터 지원**으로 TypeORM을 선택했습니다. [학습 테스트](https://github.com/daniel-juyeon-kim/study-typeorm)를 통해 TypeORM의 사용법을 익혔습니다. 또한 DB 작업을 하면서 다음과 같은 문제가 있어 해결했습니다.

- 원자성에 문제가 있어서 트랜잭션을 적용함
- 레포지토리 계층에 대한 에러 핸들링이 부족해서 레포지토리 계층 에러를 만들고 에러 컨트롤러가 처리하도록 수정

### Docker 도입

요금 문제로 클라우드 컴퓨팅 서비스를 변경했는데 초기 서버 설정부터 배포까지 오래 걸렸습니다. 그래서 프로젝트를 도커 이미지로 만들어 **서버 초기 설정 시간을 단축**했습니다. (30분 → 10분)

### Swagger로 API 문서 작성

서버 API 문서를 작성하지 않아서 기능 중 일부를 까먹는 일이 있었고 잘못 설계된 부분도 있었습니다. 그래서 Swagger로 서버 API 문서를 작성하면서 재설계했습니다.

### 기타

- ESLint, Prettier를 이용한 코드 포맷팅
- 요청 데이터에 대한 유효성 검사
- body에 HTTP 응답 코드, 메시지를 같이 보냄
